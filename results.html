<!DOCTYPE html>
<html>
<head>
  <title>Bus Results</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
</head>

<body class="bg-light">

<div class="container mt-4">

  <h3>Buses from {{ source }} â†’ {{ destination }}</h3>

  <!-- MAP (MUST SHOW) -->
  <div id="map" style="height:400px; margin-bottom:20px;"></div>

  {% for bus in buses %}
  <div class="card p-3 mb-3 shadow">
    <h5>ğŸšŒ Bus {{ bus.bus_number }}</h5>
    <p><strong>Route:</strong> {{ bus.bus_name }}</p>
    <p>
      <strong>ETA:</strong>
      <span class="badge bg-info text-dark">{{ bus.eta }}</span>
    </p>
    <p>
      <strong>Seats:</strong>
      {% if bus.seats == 'High' %}
        <span class="badge bg-success">High</span>
      {% elif bus.seats == 'Medium' %}
        <span class="badge bg-warning">Medium</span>
      {% else %}
        <span class="badge bg-danger">Low</span>
      {% endif %}
    </p>
    <p>ğŸ“ {{ bus.lat }}, {{ bus.lon }}</p>
    <button class="btn btn-primary w-100">ğŸŸ View Seats</button>
  </div>
  {% endfor %}

</div>

<!-- DATA -->
<div id="bus-data" data-buses='{{ buses | tojson | safe }}'></div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<!-- Map JS -->
<script src="{{ url_for('static', filename='js/map.js') }}"></script>

</body>
</html>
